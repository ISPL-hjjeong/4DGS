# Feature ë¶€ì—¬ ë° ì‚¬ìš© íë¦„ ìƒì„¸ ì„¤ëª…

## ğŸ¯ í•µì‹¬ ë‹µë³€

**FeatureëŠ” ì´ˆê¸° Gaussianì— ì§ì ‘ ë¶€ì—¬ë˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤!**

ëŒ€ì‹ :
1. **ì´ˆê¸° Gaussianì˜ ìœ„ì¹˜(x, y, z)ì™€ ì‹œê°„(t)ì—ì„œ featureë¥¼ ì¶”ì¶œ**
2. **ê·¸ featureë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í˜•ëŸ‰(dx, ds, dr, do, dshs)ì„ ê³„ì‚°**
3. **ì´ˆê¸° Gaussian ì†ì„±ì— ë³€í˜•ëŸ‰ì„ ë”í•´ì„œ ë³€í˜•ëœ Gaussian ì†ì„± ìƒì„±**
4. **ë³€í˜•ëœ Gaussian ì†ì„±ì´ ë Œë”ë§ì— ì‚¬ìš©ë¨**

---

## ğŸ“Š ì „ì²´ íë¦„

```
ì´ˆê¸° Gaussian ì†ì„±
  â”œâ”€ ìœ„ì¹˜: [N, 3] (x, y, z)
  â”œâ”€ ìŠ¤ì¼€ì¼: [N, 3]
  â”œâ”€ íšŒì „: [N, 4]
  â”œâ”€ íˆ¬ëª…ë„: [N, 1]
  â”œâ”€ ìƒ‰ìƒ: [N, 16, 3]
  â””â”€ ì‹œê°„: [N, 1] (t)
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ë‹¨ê³„: Feature ì¶”ì¶œ                                          â”‚
â”‚                                                             â”‚
â”‚ ì´ˆê¸° Gaussianì˜ ìœ„ì¹˜(x, y, z)ì™€ ì‹œê°„(t)ë¥¼ ì‚¬ìš©í•˜ì—¬         â”‚
â”‚ HexPlaneì—ì„œ featureë¥¼ ì¶”ì¶œ                                 â”‚
â”‚                                                             â”‚
â”‚ grid_feature = HexPlaneField.forward(pts, timestamps)       â”‚
â”‚ â†’ [N, 128] (ë‹¤ì¤‘í•´ìƒë„ feature)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ë‹¨ê³„: MLP ì²˜ë¦¬                                             â”‚
â”‚                                                             â”‚
â”‚ ì¶”ì¶œëœ featureë¥¼ MLPë¡œ ì²˜ë¦¬í•˜ì—¬ hidden feature ìƒì„±         â”‚
â”‚                                                             â”‚
â”‚ hidden = feature_out(grid_feature)                          â”‚
â”‚ â†’ [N, 256] (ì˜ˆì‹œ)                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ë‹¨ê³„: ë³€í˜•ëŸ‰ ê³„ì‚°                                           â”‚
â”‚                                                             â”‚
â”‚ hidden featureë¡œë¶€í„° ê° Gaussian ì†ì„±ì˜ ë³€í˜•ëŸ‰ ê³„ì‚°        â”‚
â”‚                                                             â”‚
â”‚ dx = pos_deform(hidden)      â†’ [N, 3]  (ìœ„ì¹˜ ë³€í˜•ëŸ‰)      â”‚
â”‚ ds = scales_deform(hidden)   â†’ [N, 3]  (ìŠ¤ì¼€ì¼ ë³€í˜•ëŸ‰)     â”‚
â”‚ dr = rotations_deform(hidden) â†’ [N, 4]  (íšŒì „ ë³€í˜•ëŸ‰)      â”‚
â”‚ do = opacity_deform(hidden)  â†’ [N, 1]  (íˆ¬ëª…ë„ ë³€í˜•ëŸ‰)     â”‚
â”‚ dshs = shs_deform(hidden)    â†’ [N, 16, 3] (ìƒ‰ìƒ ë³€í˜•ëŸ‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4ë‹¨ê³„: ë³€í˜•ëœ Gaussian ì†ì„± ìƒì„±                            â”‚
â”‚                                                             â”‚
â”‚ ì´ˆê¸° ì†ì„± + ë³€í˜•ëŸ‰ = ë³€í˜•ëœ ì†ì„±                            â”‚
â”‚                                                             â”‚
â”‚ pts_final = initial_pts + dx        â†’ [N, 3]              â”‚
â”‚ scales_final = initial_scales + ds  â†’ [N, 3]              â”‚
â”‚ rotations_final = initial_rot + dr  â†’ [N, 4]              â”‚
â”‚ opacity_final = initial_opacity + do â†’ [N, 1]             â”‚
â”‚ shs_final = initial_shs + dshs      â†’ [N, 16, 3]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5ë‹¨ê³„: ë Œë”ë§                                               â”‚
â”‚                                                             â”‚
â”‚ ë³€í˜•ëœ Gaussian ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§ ìˆ˜í–‰                â”‚
â”‚                                                             â”‚
â”‚ render(means3D_final, scales_final, rotations_final, ...)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ì½”ë“œì—ì„œ í™•ì¸

### 1ë‹¨ê³„: Feature ì¶”ì¶œ

```python
# Deformation.query_time()ì—ì„œ
grid_feature = self.grid(rays_pts_emb[:,:3], time_emb[:,:1])
# rays_pts_emb[:,:3]: ì´ˆê¸° Gaussianì˜ ìœ„ì¹˜ [N, 3]
# time_emb[:,:1]: ì‹œê°„ [N, 1]
# grid_feature: ì¶”ì¶œëœ feature [N, 128]
```

### 2ë‹¨ê³„: MLP ì²˜ë¦¬

```python
hidden = self.feature_out(hidden)
# hidden: [N, 256] (MLPë¥¼ í†µê³¼í•œ hidden feature)
```

### 3ë‹¨ê³„: ë³€í˜•ëŸ‰ ê³„ì‚°

```python
# Deformation.forward_dynamic()ì—ì„œ
dx = self.pos_deform(hidden)      # ìœ„ì¹˜ ë³€í˜•ëŸ‰
ds = self.scales_deform(hidden)   # ìŠ¤ì¼€ì¼ ë³€í˜•ëŸ‰
dr = self.rotations_deform(hidden) # íšŒì „ ë³€í˜•ëŸ‰
do = self.opacity_deform(hidden)   # íˆ¬ëª…ë„ ë³€í˜•ëŸ‰
dshs = self.shs_deform(hidden)     # ìƒ‰ìƒ ë³€í˜•ëŸ‰
```

### 4ë‹¨ê³„: ë³€í˜•ëœ ì†ì„± ìƒì„±

```python
# ì´ˆê¸° ì†ì„±ì— ë³€í˜•ëŸ‰ì„ ë”í•¨
pts = rays_pts_emb[:,:3]*mask + dx        # ìœ„ì¹˜
scales = scales_emb[:,:3]*mask + ds       # ìŠ¤ì¼€ì¼
rotations = rotations_emb[:,:4] + dr      # íšŒì „
opacity = opacity_emb[:,:1]*mask + do     # íˆ¬ëª…ë„
shs = shs_emb*mask.unsqueeze(-1) + dshs   # ìƒ‰ìƒ
```

---

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

### FeatureëŠ” ì–´ë””ì— ë¶€ì—¬ë˜ëŠ”ê°€?

1. **ì§ì ‘ ë¶€ì—¬ë˜ëŠ” ê³³: ì—†ìŒ**
   - FeatureëŠ” ì´ˆê¸° Gaussianì— ì§ì ‘ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
   - FeatureëŠ” ë³€í˜•ëŸ‰ ê³„ì‚°ì„ ìœ„í•œ ì¤‘ê°„ ì •ë³´ì…ë‹ˆë‹¤

2. **ê°„ì ‘ì ìœ¼ë¡œ ë°˜ì˜ë˜ëŠ” ê³³: ë³€í˜•ëœ Gaussian ì†ì„±**
   - Feature â†’ ë³€í˜•ëŸ‰ ê³„ì‚° â†’ ë³€í˜•ëœ ì†ì„± ìƒì„±
   - ìµœì¢…ì ìœ¼ë¡œëŠ” ë³€í˜•ëœ Gaussian ì†ì„±ì— ë°˜ì˜ë©ë‹ˆë‹¤

### êµ¬ì²´ì ì¸ ì˜ˆì‹œ

```python
# ì´ˆê¸° Gaussian
initial_xyz = [0.5, 0.3, -0.8]  # ì´ˆê¸° ìœ„ì¹˜
initial_scale = [0.1, 0.1, 0.1]  # ì´ˆê¸° ìŠ¤ì¼€ì¼
time = 0.5  # ì‹œê°„

# 1. Feature ì¶”ì¶œ
feature = HexPlaneField.forward(initial_xyz, time)
# â†’ [128] ì°¨ì›ì˜ feature ë²¡í„°

# 2. MLP ì²˜ë¦¬
hidden = feature_out(feature)
# â†’ [256] ì°¨ì›ì˜ hidden feature

# 3. ë³€í˜•ëŸ‰ ê³„ì‚°
dx = pos_deform(hidden)      # ì˜ˆ: [0.02, -0.01, 0.03]
ds = scales_deform(hidden)   # ì˜ˆ: [0.005, 0.005, 0.005]

# 4. ë³€í˜•ëœ ì†ì„± ìƒì„±
final_xyz = initial_xyz + dx
# â†’ [0.52, 0.29, -0.77]  (ë³€í˜•ëœ ìœ„ì¹˜)

final_scale = initial_scale + ds
# â†’ [0.105, 0.105, 0.105]  (ë³€í˜•ëœ ìŠ¤ì¼€ì¼)

# 5. ë Œë”ë§
render(final_xyz, final_scale, ...)  # ë³€í˜•ëœ ì†ì„±ìœ¼ë¡œ ë Œë”ë§
```

---

## ğŸ¬ ìš”ì•½

### Featureì˜ ì—­í• 

1. **ì…ë ¥**: ì´ˆê¸° Gaussianì˜ ìœ„ì¹˜(x, y, z)ì™€ ì‹œê°„(t)
2. **ì²˜ë¦¬**: HexPlaneì—ì„œ feature ì¶”ì¶œ â†’ MLP ì²˜ë¦¬
3. **ì¶œë ¥**: ë³€í˜•ëŸ‰(dx, ds, dr, do, dshs)
4. **ìµœì¢…**: ì´ˆê¸° ì†ì„± + ë³€í˜•ëŸ‰ = ë³€í˜•ëœ ì†ì„±

### FeatureëŠ” ì–´ë””ì— ë¶€ì—¬ë˜ëŠ”ê°€?

- **ì§ì ‘ ë¶€ì—¬**: ì—†ìŒ (ì¤‘ê°„ ì •ë³´)
- **ê°„ì ‘ ë°˜ì˜**: ë³€í˜•ëœ Gaussian ì†ì„±ì— ë°˜ì˜
- **ìµœì¢… ì‚¬ìš©**: ë³€í˜•ëœ Gaussian ì†ì„±ì´ ë Œë”ë§ì— ì‚¬ìš©ë¨

---

## ğŸ”‘ í•µì‹¬ ê°œë…

**FeatureëŠ” "ë¶€ì—¬"ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ "ì¶”ì¶œ"ë˜ì–´ "ì‚¬ìš©"ë©ë‹ˆë‹¤:**

1. **ì¶”ì¶œ**: ì´ˆê¸° Gaussianì˜ ìœ„ì¹˜ì™€ ì‹œê°„ì—ì„œ feature ì¶”ì¶œ
2. **ì‚¬ìš©**: Featureë¡œë¶€í„° ë³€í˜•ëŸ‰ ê³„ì‚°
3. **ë°˜ì˜**: ë³€í˜•ëŸ‰ì„ ì´ˆê¸° ì†ì„±ì— ë”í•´ì„œ ë³€í˜•ëœ ì†ì„± ìƒì„±
4. **ë Œë”ë§**: ë³€í˜•ëœ ì†ì„±ìœ¼ë¡œ ë Œë”ë§

ì¦‰, FeatureëŠ” ì´ˆê¸° Gaussianì— ì €ì¥ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ë§¤ë²ˆ í•„ìš”í•  ë•Œë§ˆë‹¤ ì¶”ì¶œë˜ì–´ ë³€í˜•ëŸ‰ ê³„ì‚°ì— ì‚¬ìš©**ë©ë‹ˆë‹¤.

